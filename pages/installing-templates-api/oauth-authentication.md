---
title: OAuth Authentication
sidebar: cyclr_sidebar
permalink: oauth-authentication
tags: [installing]
---

**_For connectors that require your user to be taken through an OAuth flow._**

Connectors using OAuth require that the user goes through a webflow where they are sent to the third party application to sign in and grant access to Cyclr.

#### Account Connector Properties
Before beginning this process you should set the values of any Parameters on the Account Connector that aren't marked as Optional.  If you don't do this, you may see a "Bad Request" message from Cyclr when navigating to the `updateaccountconnectoroauth` URL below.

To identify what the Parameters are, call the `GET /v1.0/connectors/{id}` Cyclr API endpoint and look for Parameters with `IsAccountConnectorProperty`:`true` and `IsOptional`:`false`.

You could provide some interface of your own to obtain the values for these Parameters from the user.

Call the `POST /v1.0/account/connectors/{accountConnectorId}/properties` endpoint to set each of those values on the Account Connector.

The Account Connector should now be ready to authenticate.
<br />
<br />

You'll need to create an Account Sign-In Token for a User to access the account:

Request:

````http
POST  /v1.0/accounts/{Account ID}/signintoken
Content-Type: application/json
Authorization: Bearer 0000000000000000000000000000000000000000000000000000000000000000

{
    "Username": "example_user"
}
````

Response:

````json
{
    "Token": "ABCD12340000000000000=",
    "ExpiresAtUtc": "2017-12-08T11:02:48.7436471Z"
}
````

The user should then be sent, in their browser, to:
_https://{Partner Service Domain}/connectorauth/updateaccountconnectoroauth?id={Account Connector ID}&token={Account Sign-In Token}_

For example: 
```
https://app-h.cyclr.com/connectorauth/updateaccountconnectoroauth?id=1234&token=ABCD12340000000000000=
```

The following query string parameters can be included:

| Parameter | Description | Example |
| --- | --- | --- |
| **token** | The account sign-in token generated above | ABCD12340000000000000= |
| **targetOrigin** | Either the origin of the other window for the JavaScript callback event to be dispatched or a URL to redirect the user to after the OAuth authentication is completed | <span>https://partner.cyclr.com/connectors</span> |
| **callbackMessage** | Callback message to be sent by JavaScript postMessage to the parent window. Donâ€™t include if using redirect | done |

Remember to URL encode all parameter values.

Cyclr redirects the user to the appropriate sign in page of the target application, captures the OAuth tokens generated by that app, and stores them internally. Token refresh is handled automatically later.

On completion the user will either be redirected to targetOrigin or the JavaScript message specified by the callbackMessage will be posted to the parent window to notify the host app that the authentication flow has completed.

[Step Setup](./step-set-up)  
[API Key Authentication](./api-key-authentication)  
[HTTP Basic Authentication](./basic-authentication)
